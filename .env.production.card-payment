# Production Card Payment System Configuration
# This file contains enhanced configuration for the card payment immediate access system
# Copy relevant variables to .env.production and configure with actual production values

# ============================================================================
# CARD PAYMENT FAST-TRACK CONFIGURATION
# ============================================================================

# Enable card payment fast-track approval system
VITE_ENABLE_CARD_PAYMENT_FAST_TRACK=true

# Card payment detection confidence threshold (0.0 - 1.0)
# Higher values require more confidence before auto-approving
VITE_CARD_PAYMENT_CONFIDENCE_THRESHOLD=0.8

# Payment type detection timeout (milliseconds)
VITE_PAYMENT_TYPE_DETECTION_TIMEOUT=5000

# Fast-track approval timeout (milliseconds)
VITE_FAST_TRACK_APPROVAL_TIMEOUT=10000

# Enable fallback to manual approval on detection failure
VITE_ENABLE_MANUAL_APPROVAL_FALLBACK=true

# ============================================================================
# REAL-TIME SYNC CONFIGURATION
# ============================================================================

# Enable enhanced real-time enrollment sync
VITE_ENABLE_ENHANCED_REAL_TIME_SYNC=true

# Real-time sync broadcast channels (comma-separated)
# Options: localStorage,broadcastChannel,websocket
VITE_REAL_TIME_SYNC_CHANNELS=localStorage,broadcastChannel

# Real-time sync retry attempts
VITE_REAL_TIME_SYNC_RETRY_ATTEMPTS=3

# Real-time sync retry delay (milliseconds)
VITE_REAL_TIME_SYNC_RETRY_DELAY=1000

# Cross-tab synchronization timeout (milliseconds)
VITE_CROSS_TAB_SYNC_TIMEOUT=2000

# ============================================================================
# ENROLLMENT PERSISTENCE CONFIGURATION
# ============================================================================

# Enable bulletproof enrollment persistence
VITE_ENABLE_BULLETPROOF_PERSISTENCE=true

# Enrollment persistence strategies (comma-separated)
# Options: localStorage_primary,localStorage_backup,sessionStorage,indexedDB,memoryCache
VITE_PERSISTENCE_STRATEGIES=localStorage_primary,localStorage_backup,sessionStorage

# Persistence conflict resolution strategy
# Options: latest_wins,approved_wins,remote_wins,manual_review
VITE_PERSISTENCE_CONFLICT_RESOLUTION=approved_wins

# Persistence verification interval (milliseconds)
VITE_PERSISTENCE_VERIFICATION_INTERVAL=30000

# ============================================================================
# MONITORING AND ALERTING CONFIGURATION
# ============================================================================

# Enable card payment monitoring
VITE_ENABLE_CARD_PAYMENT_MONITORING=true

# Enable performance monitoring
VITE_ENABLE_PERFORMANCE_MONITORING=true

# Enable business metrics tracking
VITE_ENABLE_BUSINESS_METRICS=true

# Monitoring data retention period (days)
VITE_MONITORING_RETENTION_DAYS=90

# Performance threshold alerts (milliseconds)
VITE_WEBHOOK_PROCESSING_THRESHOLD=5000
VITE_PAYMENT_DETECTION_THRESHOLD=2000
VITE_APPROVAL_PROCESSING_THRESHOLD=3000
VITE_UI_UPDATE_THRESHOLD=2000
VITE_END_TO_END_THRESHOLD=10000

# Error rate alert threshold (percentage)
VITE_ERROR_RATE_ALERT_THRESHOLD=5

# Alert notification endpoints
VITE_ALERT_WEBHOOK_URL=${ALERT_WEBHOOK_URL}
VITE_ALERT_EMAIL=${ALERT_EMAIL}
VITE_ALERT_SLACK_WEBHOOK=${ALERT_SLACK_WEBHOOK}

# ============================================================================
# SECURITY CONFIGURATION
# ============================================================================

# Enable enhanced webhook validation
VITE_ENABLE_ENHANCED_WEBHOOK_VALIDATION=true

# Webhook signature algorithm
# Options: sha256,sha512
VITE_WEBHOOK_SIGNATURE_ALGORITHM=sha256

# Webhook timestamp tolerance (seconds)
VITE_WEBHOOK_TIMESTAMP_TOLERANCE=300

# Enable webhook source IP verification
VITE_ENABLE_WEBHOOK_IP_VERIFICATION=true

# Allowed webhook source IPs (comma-separated)
VITE_WEBHOOK_ALLOWED_IPS=

# Enable threat detection for card payments
VITE_ENABLE_CARD_PAYMENT_THREAT_DETECTION=true

# Enable audit logging for card payment approvals
VITE_ENABLE_CARD_PAYMENT_AUDIT_LOGGING=true

# Audit log retention period (days)
VITE_AUDIT_LOG_RETENTION_DAYS=365

# ============================================================================
# ERROR HANDLING AND RECOVERY CONFIGURATION
# ============================================================================

# Enable comprehensive error recovery
VITE_ENABLE_ERROR_RECOVERY=true

# Error recovery strategies (comma-separated)
# Options: retry,fallback,manual_intervention,log_and_continue
VITE_ERROR_RECOVERY_STRATEGIES=retry,fallback,manual_intervention

# Maximum recovery attempts
VITE_MAX_RECOVERY_ATTEMPTS=3

# Recovery backoff strategy
# Options: linear,exponential,fixed
VITE_RECOVERY_BACKOFF_STRATEGY=exponential

# Recovery backoff base delay (milliseconds)
VITE_RECOVERY_BACKOFF_BASE_DELAY=1000

# Enable manual intervention triggers
VITE_ENABLE_MANUAL_INTERVENTION=true

# Manual intervention notification endpoints
VITE_MANUAL_INTERVENTION_WEBHOOK=${MANUAL_INTERVENTION_WEBHOOK}
VITE_MANUAL_INTERVENTION_EMAIL=${MANUAL_INTERVENTION_EMAIL}

# ============================================================================
# COURSE ACCESS CONFIGURATION
# ============================================================================

# Enable immediate course access granting
VITE_ENABLE_IMMEDIATE_ACCESS_GRANTING=true

# Access validation caching enabled
VITE_ENABLE_ACCESS_VALIDATION_CACHE=true

# Access validation cache TTL (seconds)
VITE_ACCESS_VALIDATION_CACHE_TTL=300

# Enable cross-device access synchronization
VITE_ENABLE_CROSS_DEVICE_ACCESS_SYNC=true

# ============================================================================
# LOGGING CONFIGURATION
# ============================================================================

# Enable detailed card payment logging
VITE_ENABLE_DETAILED_CARD_PAYMENT_LOGGING=true

# Log level for card payment flows
# Options: debug,info,warn,error
VITE_CARD_PAYMENT_LOG_LEVEL=info

# Enable structured logging
VITE_ENABLE_STRUCTURED_LOGGING=true

# Log aggregation service endpoint
VITE_LOG_AGGREGATION_ENDPOINT=${LOG_AGGREGATION_ENDPOINT}

# ============================================================================
# FEATURE FLAGS
# ============================================================================

# Enable optimistic UI updates
VITE_ENABLE_OPTIMISTIC_UI_UPDATES=true

# Enable UI rollback on failure
VITE_ENABLE_UI_ROLLBACK=true

# Enable payment type detection caching
VITE_ENABLE_PAYMENT_TYPE_CACHE=true

# Payment type cache TTL (seconds)
VITE_PAYMENT_TYPE_CACHE_TTL=3600

# ============================================================================
# PRODUCTION DEPLOYMENT SETTINGS
# ============================================================================

# Deployment environment
VITE_DEPLOYMENT_ENVIRONMENT=production

# Deployment version
VITE_DEPLOYMENT_VERSION=${DEPLOYMENT_VERSION}

# Deployment timestamp
VITE_DEPLOYMENT_TIMESTAMP=${DEPLOYMENT_TIMESTAMP}

# Enable production mode validations
VITE_ENABLE_PRODUCTION_VALIDATIONS=true

# Enable production health checks
VITE_ENABLE_HEALTH_CHECKS=true

# Health check endpoint
VITE_HEALTH_CHECK_ENDPOINT=/.netlify/functions/health-check

# ============================================================================
# NOTES
# ============================================================================
# 
# 1. Replace all ${VARIABLE} placeholders with actual values from your secret management system
# 2. Never commit actual production credentials to version control
# 3. Use Netlify environment variables or similar secret management for sensitive values
# 4. Test all configurations in staging before deploying to production
# 5. Monitor alert endpoints to ensure they're working correctly
# 6. Review and update IP whitelists regularly
# 7. Rotate webhook secrets periodically
# 8. Keep audit logs for compliance requirements
# 9. Set up proper log aggregation and monitoring dashboards
# 10. Configure alerting thresholds based on your traffic patterns
